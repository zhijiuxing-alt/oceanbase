数值格式化 
==========================



数值格式化指定了存储在数据库中的定点数和浮点数的格式。

函数中的数值格式化 
---------------------

以下数值数据类型转换函数使用了数值格式化：

* 当表达式、条件、SQL 函数和 SQL 语句中出现 `NUMBER`，`BINARY_FLOAT` 或 `BINARY_ DOUBLE` 时，且您需要它们的值转换为 `VARCHAR2` 数据类型时，需要用 `TO_CHAR` 函数的参数指定这些数值的格式。

  

* 当表达式、条件、SQL 函数和 SQL 语句中出现 `CHAR` 或 `VARCHAR2` 时，如果您需要将他们的值转换为 `NUMBER` 数据类型时，需要用 `TO_NUMBER` 函数的参数（暂不支持 `NLS_NUMERIC_CHARACTERS`）指定这些数值的格式。如果您需要将他们的值转换为 `BINARY_FLOAT` 或 `BINARY_DOUBLE` 时，需要用 `TO_BINARY_FLOAT` 和 `TO_BINARY_DOUBLE` 函数的参数指定数值格式。

  




数值格式化会将数值四舍五入，并取有效数字位数。如果某个值的小数位数，左边的有效位数比格式中指定的位数高，则用 `#` 代替该值。如果 `NUMBER` 的正值非常大且无法以指定的格式表示，则使用无穷大符号（〜）替换该值。如果负 `NUMBER` 值非常小且无法用指定的格式表示，则使用负无穷大符号（-〜）替换该值。

数值格式化的元素 
--------------------

与 Oracle 不同，OceanBase 数据库数值格式化元素仅支持标准的数值格式。下表为 OceanBase 数据库支持的数值格式化元素：


|   元素   |    示例     |                                 说明                                  |
|--------|-----------|---------------------------------------------------------------------|
| .（小数点） | 99.99     | 返回一个小数，且小数点在指定位置。 **限制条件** ：在数字格式化中，您只能指定一个小数点。     |
| 0      | 0999 9990 | 0999 返回前导零。9990 返回尾随零。                                              |
| 9      | 9999      | 返回具有指定位数的值。如果为正，则返回带有有前导空格的数；如果为负，则返回前导负数。前导零返回 0，除了零值，定点数的小数部分返回零。 |



如果省略格式参数，会将数值转为足够长的 `VARCHAR2` 以保留其所有的有效数字。

示例 
--------------

执行以下语句：

```javascript
SELECT TO_CHAR(0, '99.99') FROM DUAL;
```



查询结果如下：

```javascript
+--------------------+
| TO_CHAR(0,'99.99') |
+--------------------+
|    .00             |
+--------------------+
```



下表显示了对不同数值的 **number** 按照格式化元素 'fmt' 查询得到的结果。

```javascript
SELECT TO_CHAR(number, 'fmt')  FROM DUAL;
```




|  number  |  'fmt'  |   Result   |
|----------|---------|------------|
| 0        | 99.99   | '.00'      |
| +0.1     | 99.99   | '.10'      |
| -0.2     | 99.99   | '-.20'     |
| 0        | 90.99   | '0.00'     |
| +0.1     | 90.99   | '0.10'     |
| -0.2     | 90.99   | '-0.20'    |
| 0        | 9999    | '0'        |
| 1        | 9999    | '1'        |
| +123.456 | 999.999 | '123.456'  |
| -123.456 | 999.999 | '-123.456' |



当省略'fmt'参数的时候：

```javascript
SELECT TO_CHAR(123.456) FROM DUAL;
```



显示结果如下：

```javascript
+------------------+
| TO_CHAR(123.456) |
+------------------+
| 123.456          |
+------------------+
```



当 `TO_CHAR` 结果超过40字节，或者传入参数为 binary_double/binary_float 类型时，结果将被转为科学计数法。

例如：

```javascript
SELECT TO_CHAR(12355555555555555555555555555555555555555555555555) FROM DUAL;
```



显示结果如下：

```javascript
+-------------------------------------------------------------+
| TO_CHAR(12355555555555555555555555555555555555555555555555) |
+-------------------------------------------------------------+
| 1.2355555555555555555555555555555556E+49                    |
+-------------------------------------------------------------+
```


